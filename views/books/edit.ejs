<%- include('../layouts/main') %>

<h1>Edit Book</h1>
<form action="/books/edit/<%= book.id %>" method="post" enctype="multipart/form-data">
    <label for="title">Title:</label>
    <input type="text" id="title" name="title" value="<%= book.title %>" required>
    
    <label for="publicationYear">Publication Year:</label>
    <input type="number" id="publicationYear" name="publicationYear" value="<%= book.publicationYear %>" required>

    <label for="coverImage">Cover Image:</label>
    <input type="file" id="coverImage" name="coverImage">
    <input type="hidden" name="existingCoverImage" value="<%= book.coverImage %>">
    <img src="/images/<%= book.coverImage %>" alt="<%= book.title %>">

    <label for="categoryId">Category:</label>
    <select id="categoryId" name="categoryId" required>
        <% categories.forEach(category => { %>
            <option value="<%= category.id %>" <%= category.id === book.categoryId ? 'selected' : '' %>><%= category.name %></option>
        <% }) %>
    </select>

    <label for="authorId">Author:</label>
    <select id="authorId" name="authorId" required>
        <% authors.forEach(author => { %>
            <option value="<%= author.id %>" <%= author.id === book.authorId ? 'selected' : '' %>><%= author.name %></option>
        <% }) %>
    </select>

    <label for="publisherId">Publisher:</label>
    <select id="publisherId" name="publisherId" required>
        <% publishers.forEach(publisher => { %>
            <option value="<%= publisher.id %>" <%= publisher.id === book.publisherId ? 'selected' : '' %>><%= publisher.name %></option>
        <% }) %>
    </select>

    <button type="submit">Save</button>
</form>